<h1><%= @internship.name %></h1>

<div class="table-responsive">
  <table class="table">
    <tr>
      <th>Technologies:</th>
      <td>
        <%= @internship.tracks.pluck(:description).join(', ') %>
      </td>
    </tr>
    <tr>
      <th>Company info:</th>
      <td>
        <%= link_to @internship.website, @internship.website %><br>
        <%= @internship.address %><br><br>
        <%= @internship.description %>
      </td>
    </tr>
    <tr>
      <th>Internship description:</th>
      <td><%= @internship.description %></td>
    </tr>
    <tr>
      <th>Ideal intern:</th>
      <td><%= @internship.ideal_intern %></td>
    </tr>
    <% if @internship.clearance_required %>
    <tr>
      <th>Clearance description</th>
      <td><%= @internship.clearance_description %></td>
    </tr>
    <% end %>
  </table>
</div>

<% if current_admin %>
  <ul class='nav nav-pills'>
    <li class='<%= 'active' if params[:tab].nil? %>'>
      <%= link_to "Highly interested students", course_internship_path(@course, @internship) %>
    </li>
    <li class='<%= 'active' if params[:tab] == 'medium' %>'>
      <%= link_to "Moderately interested students", course_internship_path(@course, @internship, tab: 'medium') %>
    </li>
    <li class='<%= 'active' if params[:tab] == 'low' %>'>
      <%= link_to "Not interested students", course_internship_path(@course, @internship, tab: 'low') %>
    </li>
  </ul>

  <div class="table-responsive">
    <table class='table table-striped'>
      <thead>
        <tr>
          <th>Student</th>
          <th>Notes</th>
        </tr>
      </thead>
      <% if params[:tab].nil? %>
        <% Student.find_students_by_interest(@internship, '1').each do |student| %>
        <%= render 'student_row', student: student, internship: @internship %>
        <% end %>
      <% elsif params[:tab] == 'medium' %>
        <% Student.find_students_by_interest(@internship, '2').each do |student| %>
        <%= render 'student_row', student: student, internship: @internship %>
        <% end %>
      <% elsif params[:tab] == 'low' %>
        <% Student.find_students_by_interest(@internship, '3').each do |student| %>
        <%= render 'student_row', student: student, internship: @internship %>
        <% end %>
      <% end %>
    </table>
  </div>
<% end %>
