<div class="panel panel-info">
  <div class="panel-heading">
    <h3 class="panel-title">Interview assignments</h3>
  </div>
  <div class="panel-body">
    <div class="panel-body">
      <% if can?(:manage, Internship) && @course.internship_course %>
        <%= form_for @interview_assignment do |f| %>
          <%= render 'layouts/errors', object: @interview_assignment %>
            <div class="input-group">
              <%= f.select :internship_id, @course.internships.non_interview_assigned_internships(@student).collect {|i| [ i.name, i.id ] }, { prompt: 'Please select a company' }, { class: 'form-control', required: true } %>
              <span class="input-group-btn">
                <%= f.submit 'Add', class: 'btn btn-success' %>
              </span>
            </div>
          <%= hidden_field_tag :course_id, @course.id %>
          <%= f.hidden_field :student_id, value: @student.id %>
        <% end %>
        <br>
      <% end %>
      <div class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th>Company</th>
              <% if can? :manage, InterviewAssignment %>
                <th></th>
              <% end %>
            </tr>
          </thead>
          <tbody>
            <% @student.interview_assignments.order_by_internship_name.each do |interview_assignment| %>
              <tr>
                <td><%= link_to interview_assignment.internship.name, course_internship_path(@course, interview_assignment.internship) %></td>
                <% if can? :manage, InterviewAssignment %>
                  <td><%= link_to 'Remove', interview_assignments_path(student_id: @student.id, course_id: @course.id, internship_id: interview_assignment.internship.id), data: { method: :delete, confirm: 'Are you sure?' }, class: 'unstyled-link pull-right' %></td>
                <% end %>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
