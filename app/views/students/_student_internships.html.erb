<% if can?(:manage, Internship) %>
  <h3>Internships</h3>
  <div class="panel panel-default">
    <div class="panel-body">
      <div class="student-div student-internships">
        <div class="table-responsive">
          <table class="table student-internship-rankings-datatable">
            <thead>
              <tr>
                <th>Company</th>
                <th>Ranking from student</th>
                <th>Notes</th>
              </tr>
            </thead>
            <tbody>
              <% @course.internships.each do |internship| %>
                <tr>
                  <td class="col-xs-3"><%= link_to internship.name, course_internship_path(@course, internship) %></td>
                  <td><p><%= @student.find_rating(internship).try(:number) %></p></td>
                  <td class="col-xs-8"><p><%= @student.find_rating(internship).try(:notes) %></p></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
<% elsif can?(:read, Internship) && !@student.interview_assignments.for_course(@course).any? && @course.rankings_visible? %>
  <%= render 'ratings/form' %>
<% else %>
  <h3>Internships</h3>
  <div class="panel panel-default">
    <div class="panel-body">
      <table class="table datatable">
        <thead>
          <tr>
            <th>Company</th>
            <th>Technologies</th>
          </tr>
        </thead>
        <tbody>
          <% @course.internships.each do |internship| %>
            <tr>
              <td><%= link_to internship.name, "##{internship.id}", data: { toggle: "modal" } %></td>
              <td><%= internship.tracks_ordered_by_description %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
<% end %>
