<div class="student-div student-courses">
  <% if @student.courses.any? %>
    <div class="table-responsive">
      <table class="table">
        <thead>
          <tr>
            <th>Description</th>
            <th>Teacher</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% @student.courses.each do |course| %>
            <tr id="student-course-<%= course.id %>">
              <td><%= link_to course.description, course_student_path(course, @student) %></td>
              <td class="col-md-6"><%= course.teacher %></td>
              <td><%= link_to 'Withdraw', enrollment_path(course_id: course.id), data: { method: :delete, confirm: 'Are you sure?' }, class: 'unstyled-link col-md-6' %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% end %>

  <% if can? :manage, Enrollment %>
    <div class="row">
      <div class="col-md-4">
        <%= form_for @student, method: :patch do |f| %>
        <%= render 'layouts/errors', object: @student %>
        <div class="input-group">
          <%= f.collection_select :course_id, @student.other_courses.reverse, :id, :teacher_and_description, { include_blank: 'Please select a course' }, { class: 'col-md-4 form-control', required: true } %>
          <span class="input-group-btn">
            <%= f.submit 'Add course', class: 'btn btn-info' %>
          </span>
        </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
