<div class="student-div student-code-reviews">
  <div class="table-responsive">
    <table class="table table-hover">
      <thead>
        <th>Number</th>
        <th>Title</th>
        <th>Expectations met?</th>
        <th>Teacher notes</th>
        <th>GitHub repo</th>
        <th>Status</th>
      </thead>
      <% @course.code_reviews.each do |code_review| %>
      <tbody>
        <tr>
          <td><%= code_review.number %></td>
          <td><%= code_review.title %></td>
          <td>
            <% if code_review.expectations_met_by?(@student) %>
              <span class="glyphicon glyphicon-ok submission-success"></span>
            <% else %>
              <span class="glyphicon glyphicon-remove submission-fail"></span>
            <% end %>
          </td>
          <% if @student.submission_for(code_review) %>
            <td><%= link_to "Notes", "##{@student.submission_for(code_review).id}", data: { toggle: "modal" } %></td>
            <td><%= link_to "Submission", @student.submission_for(code_review).link, target: '_blank' %></td>
            <td>
              <% if @student.submission_for(code_review).has_been_reviewed? %>
                <%= link_to 'Reviewed', code_review_path(code_review) %>
              <% else %>
                <%= link_to 'Pending', code_review_path(code_review) %>
              <% end %>
            </td>
          <% else %>
            <td></td>
            <td></td>
            <td>
              <%= link_to 'Submit', code_review_path(code_review), class: 'text-info' %>
            </td>
          <% end %>
        </tr>
      </tbody>
      <% end %>
    </table>
  </div>
</div>

<%= render "students/notes_modal" %>
